# Review Checklist

PR レビュー時の確認項目。

## 1. 仕様・互換性

- 既存 CLI フラグや JSON 形式を壊していないか。
- 終了コードと `code` の意味が維持されているか。
- AGENTS/README/docs と実装が矛盾していないか。

## 2. セキュリティ

- policy / approval-token / confirm フラグが迂回可能になっていないか。
- secrets（credentials/token/password）が漏れる経路がないか。
- ファイル出力制限（`--allowed-output-dir`）を破っていないか。

## 3. エラー処理

- stderr が JSON で統一されているか。
- 失敗時に原因が追跡できるメッセージか。
- 空ファイル・nil・timeout など境界条件を扱えているか。

## 4. テスト品質

- 変更点をカバーするテストがあるか。
- フレークを生みやすい実装（共有 `/tmp`、時間依存）を避けているか。
- CI で再現不能な失敗が起きたとき、ログで切り分け可能か。

## 5. 変更スコープ

- 目的外の差分が混ざっていないか。
- 大規模変更は段階分割されているか。
- ドキュメント更新が必要な変更を取りこぼしていないか。
